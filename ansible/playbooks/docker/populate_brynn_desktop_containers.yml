- hosts: brynn-desktop-2
  gather_facts: false
  become: true
  roles:
    - role: docker/container
      vars:
        container:
          name: testing
          repository: testing
          tag: latest
          pull_policy: false
          runtime: nvidia
          device_requests:
            - device_ids: 0
              driver: nvidia
              capabilities:
                - gpu
                - computer
                - utility
          network: bridge
          volumes:
            - /home/fdrake/wordle_rl/model:/app/model
            - /home/fdrake/code/wordle-rl/config.yaml:/app/config.yaml
            - /home/fdrake/wordle_rl/tensorboard_logs:/app/logs
    - role: docker/container
      vars:
        container:
          name: tensorboard
          repository: ghcr.io/fred-drake/tensorboard-viewer
          tag: latest
          pull_policy: true
          network: bridge
          ports:
            - "6006:6006"
          volumes:
            - /home/fdrake/wordle_rl/tensorboard_logs:/logs
    - role: docker/container
      vars:
        container:
          name: dozzle
          repository: amir20/dozzle
          tag: latest
          network: bridge
          volumes:
            - /var/run/docker.sock:/var/run/docker.sock
          ports:
            - "8888:8080"
    - role: docker/container
      vars:
        container:
          name: coverage
          repository: nginx
          tag: latest
          network: bridge
          volumes:
            - /home/fdrake/code/wordle-rl/htmlcov:/usr/share/nginx/html
          ports:
            - "8080:80"