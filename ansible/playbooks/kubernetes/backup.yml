- hosts: localhost
  gather_facts: false
  become: false
  vars:
    backup_root_directory: "/Users/fdrake/Downloads/autobackup5"
  roles:
    # # Calibre
    # - role: kubernetes/backup/standard_volume
    #   vars:
    #     k8s_namespace: calibre
    #     container_directory: /books/calibre
    #     backup_directory: calibre
    #     container_name: calibre
    #   tags: calibre

    # Grafana
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: grafana
        container_directory: /var/lib/grafana
        backup_directory: grafana
        container_name: grafana
      tags: grafana

    # Home Assistant
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: homeassistant
        container_directory: /config
        backup_directory: config
        container_name: homeassistant-home-assistant
      tags: homeassistant

    # Netbox
    - role: kubernetes/backup/postgres
      vars:
        k8s_namespace: netbox
        pg_podname: postgres-0
        pg_database: netbox
        pg_user: "{{ secret.netbox.postgres.user }}"
        pg_password: "{{ secret.netbox.postgres.password }}"
        backup_file: netbox.sql
      tags: netbox

    # Node Red
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: node-red
        container_directory: /data
        backup_directory: data
        container_name: node-red
      tags: node-red

    # Paperless data
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: paperless
        container_directory: /usr/src/paperless/data
        backup_directory: data
        container_name: paperless
      tags: paperless

    # Paperless media
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: paperless
        container_directory: /usr/src/paperless/media
        backup_directory: media
        container_name: paperless
      tags: paperless

    # Prometheus
    - role: kubernetes/backup/prometheus
      vars:
        k8s_namespace: prometheus
        backup_directory: prometheus
      tags: prometheus

    # Prowlarr
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: prowlarr
        container_directory: /config/Backups/scheduled
        backup_directory: backups
        container_name: prowlarr
      tags: prowlarr

    # Sonarr
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: sonarr
        container_directory: /config/Backups/scheduled
        backup_directory: backups
        container_name: sonarr
      tags: sonarr

    # Radarr
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: radarr
        container_directory: /config/Backups/scheduled
        backup_directory: backups
        container_name: radarr
      tags: radarr

    # Readarr
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: readarr
        container_directory: /config/Backups/scheduled
        backup_directory: backups
        container_name: readarr
      tags: readarr

    # Sabnzbd
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: sabnzbd
        container_directory: /config
        backup_directory: config
        container_name: sabnzbd
      tags: sabnzbd

    # Tautulli
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: tautulli
        container_directory: /config/backups
        backup_directory: backups
        container_name: tautulli
      tags: tautulli

    # Uptime-Kuma
    - role: kubernetes/backup/standard_volume
      vars:
        k8s_namespace: uptime-kuma
        container_directory: /app/data
        backup_directory: data
        container_name: uptime-kuma
      tags: uptime-kuma
