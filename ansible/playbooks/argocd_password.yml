- name: ArgoCD password
  hosts: localhost
  gather_facts: false
  become: false
  tasks:
    - name: Get ArgoCD password
      ansible.builtin.command:
        cmd: kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}"
      changed_when: false
      register: argo_password

    - name: Print password
      ansible.builtin.debug:
        msg: "Argo CD password: {{ argo_password.stdout | b64decode }}"
