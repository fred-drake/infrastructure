- name: create gitea namespace
  k8s:
    name: gitea
    api_version: v1
    kind: Namespace
    state: present
  tags:
    - gitea
    
- name: gitea database server
  k8s:
    state: present
    definition: "{{ lookup('template', 'gitea-db.yml') | from_yaml_all }}"
  tags:
    - gitea

- name: gitea server
  k8s:
    state: present
    definition: "{{ lookup('template', 'gitea.yml') | from_yaml_all }}"
  tags:
    - gitea
