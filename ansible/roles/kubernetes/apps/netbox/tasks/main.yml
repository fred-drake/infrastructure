- name: namespace
  k8s:
    state: present
    definition: "{{ lookup('template', 'namespace.yml') | from_yaml_all }}"
  tags: netbox

# - name: postgres-pvc
#   k8s:
#     state: present
#     definition: "{{ lookup('template', 'postgres/postgres-pvc.yml') | from_yaml_all }}"
#   tags: netbox

- name: postgres
  k8s:
    state: present
    definition: "{{ lookup('template', 'postgres/netbox-postgres.yml') | from_yaml_all }}"
  tags: netbox

# - name: redis-pvc
#   k8s:
#     state: present
#     definition: "{{ lookup('template', 'redis/redis-pvc.yml') | from_yaml_all }}"
#   tags: netbox

- name: redis
  k8s:
    state: present
    definition: "{{ lookup('template', 'redis/netbox-redis.yml') | from_yaml_all }}"
  tags: netbox

- name: netbox
  k8s:
    state: present
    definition: "{{ lookup('template', 'netbox.yml') | from_yaml_all }}"
  tags: netbox
