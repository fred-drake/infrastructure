- name: Overclock pi 4 (high)
  ansible.builtin.copy:
    src: config-pi4-high.txt
    dest: /boot/firmware/usercfg.txt
    mode: "0755"
  when: "'raspberry_pi4_overclock_high' in group_names"
  notify: Reboot system

- name: Overclock pi 4 (medium)
  ansible.builtin.copy:
    src: config-pi4-medium.txt
    dest: /boot/firmware/usercfg.txt
    mode: "0755"
  when: "'raspberry_pi4_overclock_medium' in group_names"
  notify: Reboot system

- name: Overclock pi 4 (low)
  ansible.builtin.copy:
    src: config-pi4-low.txt
    dest: /boot/firmware/usercfg.txt
    mode: "0755"
  when: "'raspberry_pi4_overclock_low' in group_names"
  notify: Reboot system

- name: Update boot options
  ansible.builtin.copy:
    src: cmdline.txt
    dest: /boot/firmware/cmdline.txt
    mode: '0755'
  notify: Reboot system
  when: "'k8s_cluster' in group_names"
