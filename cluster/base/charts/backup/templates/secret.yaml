{{- if .Values.restic }}
{{- if .Values.s3 }}
apiVersion: v1
kind: Secret
metadata:
    name: backup-secret
    namespace: {{ .Release.Namespace }}
type: Opaque
stringData:
    resticPassword: {{ required "a valid .Values.restic.password entry required!" .Values.restic.password }}
    s3User: {{ required "a valid .Values.s3.user entry required!" .Values.s3.user }}
    s3Password: {{ required "a valid .Values.s3.password entry required!" .Values.s3.password }}
{{- end }}
{{- end }}
