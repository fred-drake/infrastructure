image:
  repository: 1dev/server
  tag: latest
  pullPolicy: IfNotPresent

resources:
  requests:
    cpu: 100m
    memory: 128Mi

service:
  main:
    ports:
      http:
        port: 6610

ingress:
  main:
    enabled: true
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-staging
    hosts:
      - host: onedev.internal.freddrake.com
        paths:
          - path: /
            pathType: Prefix
    tls:
      - hosts:
          - onedev.internal.freddrake.com
        secretName: onedev-tls

persistence:
  config:
    enabled: true
    storageClass: longhorn
    accessMode: ReadWriteOnce
    size: 10Gi
    mountPath: /opt/onedev

mysql:
  image:
    tag: 5.7
  args:
    - "--character-set-server=utf8mb4"
    - "--collation-server=utf8mb4_unicode_ci"
    - "--ignore-db-dir=lost+found"
  env:
    MYSQL_DATABASE: onedev
  envFrom:
    - secretRef:
        name: mysql-credentials
  persistence:
    mysql:
      enabled: true
      storageClass: longhorn
      accessMode: ReadWriteOnce
      size: 100Gi
      mountPath: /var/lib/mysql
