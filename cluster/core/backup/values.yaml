velero:
  annotations:
    keel.sh/policy: major
    keel.sh/approvals: "1"
    keel.sh/trigger: poll
    keel.sh/pollSchedule: "@every 12h"
  configuration:
    provider: aws
    backupStorageLocation:
      name: default
      bucket: velero
      config:
        region: default
        s3ForcePathStyle: true
        s3Url: http://minio.velero.svc.cluster.local:9000
    volumeSnapshotLocation:
      name: aws
      config:
        region: default
    resticTimeout: 7h
    defaultVolumesToRestic: true
  initContainers:
    - name: velero-plugin-for-aws
      image: velero/velero-plugin-for-aws:v1.2.1
      imagePullPolicy: IfNotPresent
      volumeMounts:
        - mountPath: /target
          name: plugins
  metrics:
    enabled: true
    serviceMonitor:
      enabled: false
  upgradeCRDs: false
  cleanUpCRDs: false
  snapshotsEnabled: true
  kubectl:
    image:
      repository: ghcr.io/k8s-at-home/kubectl
      tag: v1.22.2
  deployRestic: true
  restic:
    annotations:
      keel.sh/policy: minor
      keel.sh/approvals: "1"
      keel.sh/trigger: poll
      keel.sh/pollSchedule: "@every 12h"
    podVolumePath: /var/lib/kubelet/pods
    privileged: false
    tolerations:
      - key: "node-role.kubernetes.io/master"
        operator: "Exists"
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
  schedules:
    daily-backup:
      schedule: "0 2 * * *"
      template:
        ttl: 720h
    weekly-backup:
      schedule: "0 3 * * 2"
      template:
        ttl: 2160h

minio:
  repository: minio/minio
  tag: RELEASE.2021-11-09T03-21-45Z
