prometheus:
  server:
    image:
      tag: v2.31.0
    enabled: true
    ingress:
      enabled: true
      ingressClassName: traefik
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-production
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
    statefulSet:
      enabled: true
    annotations:
      keel.sh/policy: major
      keel.sh/approvals: "1"
      keel.sh/trigger: poll
      keel.sh/pollSchedule: "@every 12h"
    extraFlags:
      - web.enable-lifecycle
      - web.enable-admin-api
  env:
    TZ: America/New_York
  prometheus:
    prometheusSpec:
      enableAdminAPI: true
  image:
    imagePullPolicy: Always
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
  nodeExporter:
    image:
      tag: v1.2.2
    deploymentAnnotations:
      keel.sh/policy: major
      keel.sh/approvals: "1"
      keel.sh/trigger: poll
      keel.sh/pollSchedule: "@every 12h"
    tolerations:
      - key: node-role.kubernetes.io/master
        operator: Exists
        effect: NoSchedule
  alertmanager:
    image:
      tag: v0.23.0
    deploymentAnnotations:
      keel.sh/policy: major
      keel.sh/approvals: "1"
      keel.sh/trigger: poll
      keel.sh/pollSchedule: "@every 12h"
    ingress:
      enabled: true
      ingressClassName: traefik
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-production
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
  pushgateway:
    image:
      tag: v1.4.2
    deploymentAnnotations:
      keel.sh/policy: major
      keel.sh/approvals: "1"
      keel.sh/trigger: poll
      keel.sh/pollSchedule: "@every 12h"
    tolerations:
      - key: node-role.kubernetes.io/master
        value: "true"
        effect: "NoSchedule"

snmpExporter:
  image:
    repository: prom/snmp-exporter
    tag: v0.20.0

backup:
  # subdir: /snapshots/snapshot
  claimName: storage-volume-prometheus-server-0
  affinity:
    key: statefulset.kubernetes.io/pod-name
    values:
      - prometheus-server-0
  # backupType: prometheus
